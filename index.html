<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMT Diagnostics - Executive Deck</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
    
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Heebo', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent body scroll */
            background-color: #f8fafc;
        }

        /* Custom Scrollbar */
        .custom-scroll { overflow-y: auto; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .slide-enter { opacity: 0; transform: translateY(20px); }
        .slide-enter-active { opacity: 1; transform: translateY(0); transition: opacity 500ms, transform 500ms; }

        .typing-indicator span { animation: blink 1.4s infinite both; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes blink { 0% { opacity: 0.2; } 20% { opacity: 1; } 100% { opacity: 0.2; } }
        
        /* BMT CSS Logo Fallback */
        .bmt-logo-text { font-family: sans-serif; font-weight: 400; letter-spacing: -1px; color: #1a1a1a; }
        .bmt-t { color: #b91c1c; font-style: italic; position: relative; display: inline-block; }
        .bmt-t::before { content: ''; position: absolute; top: 0; left: -2px; width: 120%; height: 4px; background: #b91c1c; border-radius: 2px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- Initialization ---
        const { useState, useMemo, useRef, useEffect } = React;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } = Recharts;

        // --- Robust Icon Component ---
        const Icon = ({ name, size = 24, className = "" }) => {
            const lucide = window.lucideReact;
            if (!lucide) return null;
            
            // Handle naming mismatches
            let IconComponent = lucide[name];
            if (!IconComponent && name === 'CheckCircle2') IconComponent = lucide['CheckCircle'];
            if (!IconComponent) return null; // Graceful fallback
            
            return <IconComponent size={size} className={className} />;
        };

        // --- Gemini API ---
        const apiKey = ""; // <--- TODO: הכנס מפתח API כאן

        const generateGeminiContent = async (prompt) => {
            if (!apiKey) return "נא להגדיר מפתח API בקוד.";
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                if (!response.ok) throw new Error('Network error');
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "שגיאה בקבלת תשובה.";
            } catch (error) {
                console.error("Gemini Error:", error);
                return "אירעה שגיאה בתקשורת עם ה-AI.";
            }
        };

        // --- Components ---

        // BMT Logo Component (Auto-fallback)
        const BMTLogo = () => {
            const [imgError, setImgError] = useState(false);

            if (imgError) {
                // CSS Fallback that looks like the real logo
                return (
                    <div className="flex flex-col leading-none select-none">
                        <div className="flex items-baseline gap-0.5">
                            <span className="text-4xl bmt-logo-text">BM</span>
                            <span className="text-5xl bmt-t font-light translate-y-1">T</span>
                        </div>
                        <span className="text-sm tracking-widest text-black ml-1">Diagnostics</span>
                    </div>
                );
            }

            return (
                <img 
                    src="B.M.T Logo.jpg" 
                    alt="BMT Diagnostics" 
                    className="h-14 object-contain"
                    onError={() => setImgError(true)}
                />
            );
        };

        const Header = ({ currentSlide, totalSlides }) => (
            <div className="fixed top-0 left-0 right-0 h-20 bg-white shadow-sm z-50 flex items-center justify-between px-8 border-b border-gray-100 font-sans" dir="rtl">
                <div className="flex items-center gap-3">
                    <BMTLogo />
                </div>
                <div className="flex items-center gap-4">
                    <div className="hidden md:flex gap-1">
                        {Array.from({ length: totalSlides }).map((_, i) => (
                            <div key={i} className={`h-1.5 rounded-full transition-all duration-300 ${i === currentSlide ? 'w-8 bg-blue-600' : 'w-2 bg-gray-200'}`} />
                        ))}
                    </div>
                    <span className="text-sm font-medium text-gray-500">שקף {currentSlide + 1} מתוך {totalSlides}</span>
                </div>
            </div>
        );

        const SlideContainer = ({ children, className = "" }) => (
            <div className={`w-full h-full flex flex-col pt-24 pb-24 px-4 md:px-16 max-w-7xl mx-auto overflow-y-auto custom-scroll ${className}`}>
                {children}
            </div>
        );

        // --- AI Chat ---
        const AIAssistant = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [messages, setMessages] = useState([{ role: 'system', text: 'שלום! אני העוזר הווירטואלי של BMT. איך אני יכול לעזור לך להבין את הפתרונות שלנו היום?' }]);
            const [input, setInput] = useState('');
            const [isTyping, setIsTyping] = useState(false);
            const chatEndRef = useRef(null);

            useEffect(() => chatEndRef.current?.scrollIntoView({ behavior: "smooth" }), [messages, isOpen]);

            const handleSend = async () => {
                if (!input.trim()) return;
                const userMsg = input;
                setMessages(prev => [...prev, { role: 'user', text: userMsg }]);
                setInput('');
                setIsTyping(true);
                
                const prompt = `You are a sales assistant for BMT Diagnostics. Context: HMO Pitch Deck. User question: "${userMsg}". Answer in Hebrew, max 2-3 sentences.`;
                const reply = await generateGeminiContent(prompt);
                
                setIsTyping(false);
                setMessages(prev => [...prev, { role: 'system', text: reply }]);
            };

            return (
                <React.Fragment>
                    <button onClick={() => setIsOpen(!isOpen)} className="fixed bottom-6 left-6 z-[60] bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:scale-105 transition-transform duration-300 flex items-center justify-center">
                        {isOpen ? <Icon name="X" size={24} /> : <Icon name="Bot" size={24} />}
                    </button>

                    {isOpen && (
                        <div className="fixed bottom-24 left-6 z-[60] w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden flex flex-col font-sans" style={{height: '450px'}} dir="rtl">
                            <div className="bg-indigo-600 p-4 text-white flex items-center gap-2">
                                <Icon name="Sparkles" size={18} />
                                <span className="font-bold">BMT AI Consultant</span>
                            </div>
                            <div className="flex-1 overflow-y-auto p-4 bg-slate-50 space-y-4 custom-scroll">
                                {messages.map((msg, idx) => (
                                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-start' : 'justify-end'}`}>
                                        <div className={`max-w-[85%] p-3 rounded-2xl text-sm ${msg.role === 'user' ? 'bg-white border border-gray-200 text-slate-800 rounded-br-none' : 'bg-indigo-600 text-white rounded-bl-none shadow-md'}`}>
                                            {msg.text}
                                        </div>
                                    </div>
                                ))}
                                {isTyping && <div className="flex justify-end"><div className="bg-indigo-600 text-white p-3 rounded-2xl rounded-bl-none shadow-md text-sm typing-indicator"><span>●</span><span>●</span><span>●</span></div></div>}
                                <div ref={chatEndRef} />
                            </div>
                            <div className="p-3 bg-white border-t border-gray-100 flex gap-2">
                                <input type="text" value={input} onChange={(e) => setInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleSend()} placeholder="שאל אותי משהו..." className="flex-1 px-4 py-2 bg-slate-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" />
                                <button onClick={handleSend} disabled={isTyping} className="bg-indigo-600 text-white p-2 rounded-full hover:bg-indigo-700 disabled:opacity-50">
                                    <Icon name="ArrowRightCircle" size={20} className="rotate-180" />
                                </button>
                            </div>
                        </div>
                    )}
                </React.Fragment>
            );
        };

        // --- Slides ---

        const CoverSlide = ({ nextSlide }) => (
            <SlideContainer className="justify-center items-center text-center">
                <div className="bg-blue-50 text-blue-600 px-4 py-1 rounded-full text-sm font-semibold mb-6 animate-pulse">
                    מהפכת הדיאגנוסטיקה הביתית
                </div>
                <h1 className="text-5xl md:text-7xl font-black text-slate-900 mb-6 leading-tight font-sans">
                    שותפות אסטרטגית <br/>
                    <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-teal-500">לרפואה מונעת דיגיטלית</span>
                </h1>
                <p className="text-xl md:text-2xl text-slate-600 max-w-3xl mb-10 font-light font-sans">
                    פתרון AI מתקדם המשלב בדיקות ביתיות מדויקות עם אפליקציה חכמה.
                    העלאת היענות (Compliance), גילוי מוקדם מציל חיים וחיסכון תפעולי עצום.
                </p>
                <button onClick={nextSlide} className="group bg-blue-600 hover:bg-blue-700 text-white text-xl px-10 py-4 rounded-full font-bold shadow-lg shadow-blue-600/30 transition-all flex items-center gap-3 font-sans">
                    גלה את הפתרון
                    <Icon name="ArrowRightCircle" className="group-hover:-translate-x-1 transition-transform" />
                </button>
            </SlideContainer>
        );

        const StrategySlide = () => (
            <SlideContainer>
                <div className="flex flex-col md:flex-row gap-12 items-center h-full font-sans">
                    <div className="flex-1 space-y-6">
                        <h2 className="text-4xl font-bold text-slate-800 border-r-4 border-blue-600 pr-4">האתגר הלאומי: מניעה</h2>
                        <ul className="space-y-6">
                            <li className="flex gap-4 items-start">
                                <div className="bg-red-100 p-2 rounded-lg text-red-600 mt-1"><Icon name="TrendingUp" size={24} /></div>
                                <div>
                                    <h3 className="text-xl font-bold text-slate-700">צוואר הבקבוק בגילוי מוקדם</h3>
                                    <p className="text-slate-600">שיעורי ביצוע בדיקות סקר (FOB) נמוכים בקרב אוכלוסיות בסיכון, הנובעים מחוסר נוחות ובירוקרטיה.</p>
                                </div>
                            </li>
                            <li className="flex gap-4 items-start">
                                <div className="bg-orange-100 p-2 rounded-lg text-orange-600 mt-1"><Icon name="Activity" size={24} /></div>
                                <div>
                                    <h3 className="text-xl font-bold text-slate-700">עומס על המערכת</h3>
                                    <p className="text-slate-600">זמני המתנה ארוכים לגסטרואנטרולוגים וקולונוסקופיות, הנובעים מסינון לא יעיל של מטופלים.</p>
                                </div>
                            </li>
                            <li className="flex gap-4 items-start">
                                <div className="bg-blue-100 p-2 rounded-lg text-blue-600 mt-1"><Icon name="Smartphone" size={24} /></div>
                                <div>
                                    <h3 className="text-xl font-bold text-slate-700">העידן הדיגיטלי</h3>
                                    <p className="text-slate-600">המטופלים מצפים לפתרונות מידיים, נגישים וביתיים - בדיוק כפי שהתרגלו בתקופת הקורונה.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div className="flex-1 w-full bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                        <div className="text-center mb-6">
                            <h3 className="text-2xl font-bold text-slate-800">העלות האמיתית של חוסר היענות</h3>
                            <p className="text-sm text-slate-500">עלות טיפול בסרטן מעי גס לפי שלבי גילוי</p>
                        </div>
                        <div className="h-64 w-full" dir="ltr">
                            <ResponsiveContainer width="100%" height="100%">
                                <BarChart data={[{ name: 'גילוי מוקדם', cost: 30000 }, { name: 'שלב 3', cost: 180000 }, { name: 'שלב 4 (גרורתי)', cost: 350000 }]}>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                    <XAxis dataKey="name" tick={{fontSize: 12}} />
                                    <YAxis hide />
                                    <Tooltip formatter={(value) => `₪${value.toLocaleString()}`} cursor={{fill: '#f1f5f9'}} />
                                    <Bar dataKey="cost" fill="#ef4444" radius={[4, 4, 0, 0]} barSize={60} />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                </div>
            </SlideContainer>
        );

        const DigitalSolutionSlide = () => (
            <SlideContainer>
                <div className="mb-10 text-center font-sans">
                    <h2 className="text-4xl font-bold text-slate-800">הפתרון הדיגיטלי: מעבדה בכף היד</h2>
                    <p className="text-xl text-slate-500 mt-2">טכנולוגיית AI המהפכנית המנגישה בדיקות מעבדה מדויקות לכל בית בישראל</p>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-3 gap-8 h-full">
                    <div className="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 flex flex-col items-center text-center relative overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                        <div className="absolute top-0 left-0 w-full h-2 bg-blue-500"></div>
                        <div className="bg-blue-100 p-4 rounded-full text-blue-600 mb-6 group-hover:scale-110 transition-transform"><Icon name="Scan" size={40} /></div>
                        <h3 className="text-2xl font-bold text-slate-800 mb-3">סריקה פשוטה</h3>
                        <p className="text-slate-600">המטופל מבצע את הבדיקה בביתו וסורק את הקסטה באמצעות אפליקציה ייעודית. ממשק משתמש אינטואיטיבי המותאם גם לגיל השלישי.</p>
                    </div>
                    <div className="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 flex flex-col items-center text-center relative overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                        <div className="absolute top-0 left-0 w-full h-2 bg-indigo-500"></div>
                        <div className="bg-indigo-100 p-4 rounded-full text-indigo-600 mb-6 group-hover:scale-110 transition-transform"><Icon name="BrainCircuit" size={40} /></div>
                        <h3 className="text-2xl font-bold text-slate-800 mb-3">פענוח AI בזמן אמת</h3>
                        <p className="text-slate-600">אלגוריתם ראייה ממוחשבת (Computer Vision) מנתח את תוצאת הבדיקה בדיוק העולה על העין האנושית. מניעת טעויות קריאה (Faint Lines).</p>
                    </div>
                    <div className="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 flex flex-col items-center text-center relative overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                        <div className="absolute top-0 left-0 w-full h-2 bg-teal-500"></div>
                        <div className="bg-teal-100 p-4 rounded-full text-teal-600 mb-6 group-hover:scale-110 transition-transform"><Icon name="Database" size={40} /></div>
                        <h3 className="text-2xl font-bold text-slate-800 mb-3">סגירת מעגל טיפולי</h3>
                        <p className="text-slate-600">התוצאות משודרות מוצפנות ישירות לתיק הרפואי (EMR) של הקופה. במקרה של תוצאה חיובית, המערכת יכולה להזמין אוטומטית תור.</p>
                    </div>
                </div>
                
                <div className="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="bg-slate-100 rounded-2xl p-6 flex flex-col gap-4">
                         <div className="flex items-center gap-4">
                            <div className="bg-green-500 text-white p-2 rounded-full"><Icon name="CheckCircle2" /></div>
                            <span className="font-bold text-slate-700">זמינות 24/7 ללא תלות במעבדה</span>
                        </div>
                         <div className="flex items-center gap-4">
                            <div className="bg-green-500 text-white p-2 rounded-full"><Icon name="CheckCircle2" /></div>
                            <span className="font-bold text-slate-700">קיט בדיקה היגייני ללא מגע</span>
                        </div>
                    </div>
                    <div className="bg-blue-50 border border-blue-100 rounded-2xl p-6 flex items-start gap-4">
                        <div className="bg-blue-500 text-white p-2 rounded-full mt-1 flex-shrink-0"><Icon name="Lock" size={20} /></div>
                        <div>
                            <h4 className="font-bold text-slate-800 text-lg mb-1">הגנת פרטיות מקסימלית</h4>
                            <p className="text-slate-600 text-sm">המערכת <span className="font-bold">אינה שומרת</span> ואינה נחשפת למידע אישי של המטופל (PII). כל העיבוד מתבצע בצורה אנונימית ומוצפנת בהתאם לתקני GDPR ו-HIPAA המחמירים.</p>
                        </div>
                    </div>
                </div>
            </SlideContainer>
        );

        const FOBEconomicsSlide = () => {
            const [targetPop, setTargetPop] = useState(50000);
            const [baseCompliance, setBaseCompliance] = useState(60); 
            const [appBoost, setAppBoost] = useState(15); 
            const [aiSummary, setAiSummary] = useState('');
            const [isAiLoading, setIsAiLoading] = useState(false);
            
            const CANCER_RATE = 0.003; 
            const SAVING_PER_CASE = 150000; 
            const currentTests = Math.floor(targetPop * (baseCompliance / 100));
            const newTests = Math.floor(targetPop * ((baseCompliance + appBoost) / 100));
            const additionalTests = newTests - currentTests;
            const additionalDetections = Math.floor(additionalTests * CANCER_RATE);
            const totalSavings = additionalDetections * SAVING_PER_CASE;

            const generateSummary = async () => {
                setIsAiLoading(true);
                const prompt = `פעל כיועץ אסטרטגי. נתונים: אוכלוסייה ${targetPop}, היענות נוכחית ${baseCompliance}%, עלייה ${appBoost}%, בדיקות נוספות ${additionalTests}, גילוי מוקדם ${additionalDetections}, חיסכון ${totalSavings}. כתוב סיכום מנהלים קצר.`;
                const result = await generateGeminiContent(prompt);
                setAiSummary(result);
                setIsAiLoading(false);
            };

            return (
                <SlideContainer>
                    <div className="flex flex-col h-full font-sans">
                        <div className="mb-6 flex justify-between items-end">
                            <div>
                                <h2 className="text-4xl font-bold text-slate-800">FOB: מחשבון היענות וחיסכון</h2>
                                <p className="text-xl text-slate-500">השפעת האפליקציה על גילוי מוקדם של סרטן המעי הגס</p>
                            </div>
                        </div>

                        <div className="flex flex-col lg:flex-row gap-8 flex-1">
                            <div className="flex-1 bg-white p-6 rounded-2xl shadow-lg border border-blue-100 flex flex-col">
                                <h3 className="text-xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                                    <Icon name="ShieldCheck" className="text-blue-600" size={20}/> פרמטרים לאוכלוסייה
                                </h3>
                                <div className="space-y-6 flex-1">
                                    <div>
                                        <label className="flex justify-between text-sm font-medium text-slate-700 mb-2">
                                            <span>אוכלוסיית יעד (גילאי 50-74)</span>
                                            <span className="text-blue-600 font-bold">{targetPop.toLocaleString()}</span>
                                        </label>
                                        <input type="range" min="10000" max="200000" step="5000" value={targetPop} onChange={(e) => setTargetPop(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600 dir-ltr" />
                                    </div>
                                    <div className="bg-slate-50 p-4 rounded-xl">
                                        <label className="flex justify-between text-sm font-medium text-slate-700 mb-2">
                                            <span>שיעור היענות נוכחי</span>
                                            <span className="text-slate-600 font-bold">{baseCompliance}%</span>
                                        </label>
                                        <input type="range" min="30" max="80" step="1" value={baseCompliance} onChange={(e) => setBaseCompliance(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-400 dir-ltr" />
                                        <div className="flex justify-between mt-2 text-xs text-slate-500 border-t border-slate-200 pt-2">
                                            <span>בדיקות מבוצעות כיום:</span>
                                            <span className="font-bold">{currentTests.toLocaleString()}</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label className="flex justify-between text-sm font-medium text-slate-700 mb-2">
                                            <span>תוספת היענות צפויה</span>
                                            <span className="text-green-600 font-bold">+{appBoost}%</span>
                                        </label>
                                        <input type="range" min="5" max="30" step="1" value={appBoost} onChange={(e) => setAppBoost(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-green-500 dir-ltr" />
                                        <div className="flex justify-between mt-2 text-xs text-green-600">
                                            <span>סה"כ בדיקות עם אפליקציה:</span>
                                            <span className="font-bold">{newTests.toLocaleString()}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="flex-1 space-y-6 flex flex-col">
                                <div className="bg-slate-900 text-white p-6 rounded-2xl shadow-xl">
                                    <div className="flex items-center gap-3 mb-4">
                                        <Icon name="HeartPulse" className="text-rose-500" />
                                        <h3 className="text-lg font-bold">השורה התחתונה: הצלת חיים</h3>
                                    </div>
                                    <div className="flex justify-between items-end border-b border-slate-700 pb-4 mb-4">
                                        <span className="text-slate-300">בדיקות סקר <span className="text-green-400 font-bold">נוספות</span> שבוצעו</span>
                                        <span className="text-3xl font-black text-blue-400">+{additionalTests.toLocaleString()}</span>
                                    </div>
                                    <div className="flex justify-between items-end">
                                        <span className="text-slate-300">מקרים שהתגלו מוקדם (מנעו שלב קשה)</span>
                                        <span className="text-3xl font-black text-green-400">~{additionalDetections}</span>
                                    </div>
                                </div>

                                <div className="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-green-500 text-center">
                                    <div className="text-sm text-slate-500 mb-2">חיסכון כלכלי משוער לטיפול (בשנה אחת)</div>
                                    <div className="text-5xl font-black text-green-600 tracking-tight">₪{totalSavings.toLocaleString()}</div>
                                </div>

                                <div className="flex-1 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100 p-5 flex flex-col">
                                     <div className="flex justify-between items-center mb-3">
                                        <div className="flex items-center gap-2 text-indigo-700 font-bold">
                                            <Icon name="Sparkles" size={18} />
                                            <span>ניתוח עסקי חכם (Gemini AI)</span>
                                        </div>
                                        <button onClick={generateSummary} disabled={isAiLoading} className="bg-indigo-600 hover:bg-indigo-700 text-white text-xs px-3 py-1.5 rounded-full shadow transition-all flex items-center gap-1 disabled:opacity-50">
                                            {isAiLoading ? <Icon name="Loader2" size={14} className="animate-spin" /> : <Icon name="MessageSquareQuote" size={14} />}
                                            {isAiLoading ? 'מנתח נתונים...' : 'צור סיכום מנהלים'}
                                        </button>
                                     </div>
                                     <div className="flex-1 bg-white/60 rounded-xl p-3 text-sm text-slate-700 leading-relaxed overflow-y-auto">
                                        {aiSummary ? <p className="animate-[fadeIn_0.5s_ease-out]">{aiSummary}</p> : <p className="text-slate-400 italic text-center mt-2">לחץ על הכפתור לקבלת ניתוח מבוסס AI...</p>}
                                     </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </SlideContainer>
            );
        };

        const CalprotectinSlide = () => {
             const [population, setPopulation] = useState(25000);
            const [aiSummary, setAiSummary] = useState('');
            const [isAiLoading, setIsAiLoading] = useState(false);
            
            const potentialIBD = useMemo(() => Math.floor(population * 0.05), [population]); 
            const savedColonoscopies = useMemo(() => Math.floor(potentialIBD * 0.5), [potentialIBD]); 
            const moneySaved = useMemo(() => (savedColonoscopies * 2500) - (potentialIBD * 150), [savedColonoscopies, potentialIBD]);

            const generateSummary = async () => {
                setIsAiLoading(true);
                const prompt = `פעל כיועץ רפואי. נתונים: פניות כאב בטן ${population}, בירור IBD ${potentialIBD}, חיסכון תורים ${savedColonoscopies}, חיסכון כספי ${moneySaved}. כתוב טיעון להכנסת הבדיקה לסל.`;
                const result = await generateGeminiContent(prompt);
                setAiSummary(result);
                setIsAiLoading(false);
            };

            return (
                <SlideContainer>
                    <div className="flex flex-col h-full font-sans">
                        <div className="mb-6">
                            <h2 className="text-4xl font-bold text-slate-800">Calprotectin: מסננת חכמה</h2>
                            <p className="text-xl text-slate-500">פתרון לעומס במכוני הגסטרו: הבדלה בין IBD ל-IBS</p>
                        </div>

                        <div className="flex flex-col lg:flex-row gap-8 flex-1">
                             <div className="flex-1 bg-white p-6 rounded-2xl shadow-lg border border-indigo-100 flex flex-col">
                                <h3 className="text-xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                                    <Icon name="Activity" className="text-indigo-600" size={20}/> הפחתת תורים מיותרים
                                </h3>
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-700 mb-2">מטופלים עם תלונה על כאבי בטן (פוטנציאל שנתי)</label>
                                        <input type="range" min="1000" max="100000" step="1000" value={population} onChange={(e) => setPopulation(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 dir-ltr" />
                                        <div className="text-right font-bold text-indigo-600 text-lg mt-1">{population.toLocaleString()} מטופלים</div>
                                    </div>
                                    <div className="bg-indigo-50 p-4 rounded-xl space-y-2 text-sm text-slate-700 flex-1">
                                        <p className="font-bold flex items-center gap-2"><Icon name="Calculator" size={16}/> הנחות יסוד למודל:</p>
                                        <ul className="list-disc list-inside space-y-1">
                                            <li>כ-5% מהמבוטחים פונים עם תלונות בטן.</li>
                                            <li>ללא סינון: כולם נשלחים לקולונוסקופיה (2,500 ₪).</li>
                                            <li>עם Calprotectin: כ-50% מאובחנים כ-IBS ונחסכים (עלות בדיקה 150 ₪).</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div className="flex-1 flex flex-col gap-4">
                                <div className="grid grid-cols-1 gap-4">
                                    <div className="bg-white p-6 rounded-2xl shadow-sm border-r-4 border-indigo-500 flex justify-between items-center">
                                        <div>
                                            <div className="text-sm text-slate-500">קולונוסקופיות שנחסכו</div>
                                            <div className="text-3xl font-black text-slate-800">{savedColonoscopies.toLocaleString()}</div>
                                        </div>
                                        <Icon name="Microscope" size={40} className="text-indigo-200"/>
                                    </div>
                                    <div className="bg-white p-6 rounded-2xl shadow-sm border-r-4 border-green-500 flex justify-between items-center">
                                        <div>
                                            <div className="text-sm text-slate-500">חיסכון כספי ישיר לקופה</div>
                                            <div className="text-3xl font-black text-green-600">₪{moneySaved.toLocaleString()}</div>
                                        </div>
                                        <Icon name="Activity" size={40} className="text-green-200"/>
                                    </div>
                                </div>

                                <div className="flex-1 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100 p-5 flex flex-col">
                                     <div className="flex justify-between items-center mb-3">
                                        <div className="flex items-center gap-2 text-indigo-700 font-bold"><Icon name="Sparkles" size={18} /> <span>ניתוח תפעולי (AI)</span></div>
                                        <button onClick={generateSummary} disabled={isAiLoading} className="bg-indigo-600 hover:bg-indigo-700 text-white text-xs px-3 py-1.5 rounded-full shadow transition-all flex items-center gap-1 disabled:opacity-50">
                                            {isAiLoading ? <Icon name="Loader2" size={14} className="animate-spin" /> : <Icon name="MessageSquareQuote" size={14} />}
                                            {isAiLoading ? 'מעבד...' : 'צור המלצה לדירקטוריון'}
                                        </button>
                                     </div>
                                     <div className="flex-1 bg-white/60 rounded-xl p-3 text-sm text-slate-700 leading-relaxed overflow-y-auto">
                                        {aiSummary ? <p className="animate-[fadeIn_0.5s_ease-out]">{aiSummary}</p> : <p className="text-slate-400 italic text-center mt-2">לחץ כדי לקבל המלצה אסטרטגית מבוססת AI...</p>}
                                     </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </SlideContainer>
            );
        };

        const ProductSuiteSlide = () => (
            <SlideContainer>
                <div className="mb-8 font-sans">
                    <h2 className="text-4xl font-bold text-slate-800">פורטפוליו בדיקות מקיף</h2>
                    <p className="text-xl text-slate-500 mt-2">מעטפת דיאגנוסטית שלמה לבית ולמרפאה</p>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 h-full pb-8 font-sans">
                    <div className="bg-white p-6 rounded-2xl shadow-md border-r-4 border-teal-500 hover:shadow-lg transition-shadow">
                        <div className="flex justify-between items-start mb-4">
                            <div className="bg-teal-100 p-3 rounded-xl text-teal-600"><Icon name="FlaskConical" size={32} /></div>
                            <span className="bg-teal-50 text-teal-700 px-3 py-1 rounded-full text-xs font-bold">גסטרואנטרולוגיה</span>
                        </div>
                        <h3 className="text-2xl font-bold text-slate-800 mb-2">מערך גסטרו מלא</h3>
                        <ul className="space-y-3">
                            <li className="flex items-start gap-3">
                                <span className="w-2 h-2 mt-2 rounded-full bg-teal-500 flex-shrink-0"></span>
                                <div>
                                    <strong>H. Pylori Ag:</strong> זיהוי אנטיגן בצואה. מחליף את תבחין הנשיפה היקר והמסורבל. תשובה במקום.
                                </div>
                            </li>
                            <li className="flex items-start gap-3">
                                <span className="w-2 h-2 mt-2 rounded-full bg-teal-500 flex-shrink-0"></span>
                                <div>
                                    <strong>Calprotectin:</strong> סמן דלקת (Inflammation Marker) רגיש.
                                </div>
                            </li>
                            <li className="flex items-start gap-3">
                                <span className="w-2 h-2 mt-2 rounded-full bg-teal-500 flex-shrink-0"></span>
                                <div>
                                    <strong>Adeno/Rota:</strong> פאנל ילדים לזיהוי מהיר של גורמי שלשול ויראליים.
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div className="bg-white p-6 rounded-2xl shadow-md border-r-4 border-rose-500 hover:shadow-lg transition-shadow">
                         <div className="flex justify-between items-start mb-4">
                            <div className="bg-rose-100 p-3 rounded-xl text-rose-600"><Icon name="Stethoscope" size={32} /></div>
                            <span className="bg-rose-50 text-rose-700 px-3 py-1 rounded-full text-xs font-bold">קהילה ומשפחה</span>
                        </div>
                        <h3 className="text-2xl font-bold text-slate-800 mb-2">רפואת משפחה וילדים</h3>
                        <div className="grid grid-cols-2 gap-4 mt-4">
                            <div className="bg-slate-50 p-3 rounded-lg text-center border border-slate-100">
                                <div className="font-bold text-slate-800 text-lg">Covid + Flu</div>
                                <div className="text-xs text-slate-500">Combo A+B</div>
                            </div>
                             <div className="bg-slate-50 p-3 rounded-lg text-center border border-slate-100">
                                <div className="font-bold text-slate-800 text-lg">Strep A</div>
                                <div className="text-xs text-slate-500">מניעת אנטיביוטיקה</div>
                            </div>
                             <div className="bg-slate-50 p-3 rounded-lg text-center border border-slate-100">
                                <div className="font-bold text-slate-800 text-lg">Pregnancy</div>
                                <div className="text-xs text-slate-500">hCG רגיש במיוחד</div>
                            </div>
                             <div className="bg-slate-50 p-3 rounded-lg text-center border border-slate-100">
                                <div className="font-bold text-slate-800 text-lg">Giardia</div>
                                <div className="text-xs text-slate-500">זיהוי טפילים</div>
                            </div>
                        </div>
                    </div>
                </div>
            </SlideContainer>
        );

        const SummarySlide = () => (
            <SlideContainer className="justify-center items-center">
                <div className="w-full max-w-5xl bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl shadow-2xl p-12 text-white font-sans text-center">
                    <div className="mb-8 flex justify-center">
                        <div className="bg-blue-600 p-4 rounded-2xl shadow-lg shadow-blue-500/30">
                            <Icon name="Activity" size={48} className="text-white" />
                        </div>
                    </div>
                    
                    <h2 className="text-4xl md:text-5xl font-black mb-6">העתיד של הדיאגנוסטיקה כבר כאן</h2>
                    <p className="text-xl text-slate-300 max-w-3xl mx-auto mb-12 leading-relaxed">
                        השילוב בין בדיקות מעבדה מדויקות לטכנולוגיית AI ביתית מאפשר לקופות החולים
                        לשפר דרמטית את איכות הרפואה, להגדיל את היענות המטופלים ולחסוך מיליוני שקלים בשנה.
                    </p>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-right">
                        <div className="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/10">
                            <h4 className="text-xl font-bold text-blue-400 mb-2">קליני</h4>
                            <p className="text-sm text-slate-300">דיוק מעבדתי בבית המטופל, הפחתת טעויות אנוש ופענוח מיידי.</p>
                        </div>
                        <div className="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/10">
                            <h4 className="text-xl font-bold text-green-400 mb-2">כלכלי</h4>
                            <p className="text-sm text-slate-300">חיסכון עצום בעלויות טיפול אונקולוגי ובדיקות פולשניות מיותרות.</p>
                        </div>
                        <div className="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/10">
                            <h4 className="text-xl font-bold text-purple-400 mb-2">שירותי</h4>
                            <p className="text-sm text-slate-300">זמינות מקסימלית למבוטח, הפחתת תורים ושיפור שביעות רצון.</p>
                        </div>
                    </div>
                </div>
            </SlideContainer>
        );

        // --- Main App ---

        const App = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const slides = [
                CoverSlide,
                StrategySlide,
                DigitalSolutionSlide,
                FOBEconomicsSlide,
                CalprotectinSlide,
                ProductSuiteSlide,
                SummarySlide
            ];

            const nextSlide = () => { if (currentSlide < slides.length - 1) setCurrentSlide(curr => curr + 1); };
            const prevSlide = () => { if (currentSlide > 0) setCurrentSlide(curr => curr - 1); };
            const CurrentSlideComponent = slides[currentSlide];

            return (
                <div className="w-full h-screen bg-slate-50 flex flex-col text-right font-sans" dir="rtl">
                    <Header currentSlide={currentSlide} totalSlides={slides.length} />
                    
                    <main className="flex-1 relative overflow-hidden">
                        <div key={currentSlide} className="w-full h-full animate-[fadeIn_0.5s_ease-out]">
                            <CurrentSlideComponent nextSlide={nextSlide} />
                        </div>
                    </main>

                    <AIAssistant />

                    <div className="fixed bottom-0 left-0 right-0 h-20 bg-white border-t border-gray-200 flex items-center justify-between px-8 z-50">
                        <button onClick={prevSlide} disabled={currentSlide === 0} className={`flex items-center gap-2 px-6 py-2 rounded-full font-medium transition-all ${currentSlide === 0 ? 'text-gray-300 cursor-not-allowed' : 'text-slate-600 hover:bg-slate-100'}`}>
                            <Icon name="ChevronRight" size={20} /> הקודם
                        </button>
                        <div className="hidden md:block text-slate-400 text-sm">© 2024 BMT Diagnostics. Confidential.</div>
                        <button onClick={nextSlide} disabled={currentSlide === slides.length - 1} className={`flex items-center gap-2 px-6 py-2 rounded-full font-medium transition-all shadow-md ${currentSlide === slides.length - 1 ? 'text-gray-300 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`}>
                            {currentSlide === slides.length - 1 ? 'סיום' : 'הבא'} <Icon name="ChevronLeft" size={20} />
                        </button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
